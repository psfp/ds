import streamlit as st
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.ensemble import RandomForestRegressor
from sklearn.metrics import mean_squared_error, r2_score
from math import sqrt

st.set_page_config(layout='wide')

# URL-ul direct către fișierul CSV de pe GitHub
url = 'fuelconsume_original2.csv'

# Assuming you have uploaded a file named 'Cleaned_Fuel_Consumption.xlsx'
data_cleaned = pd.read_csv(url)

# Selecting the relevant features for prediction
# Assuming 'fuelconsumptioncomb' as the target variable and the rest as features
X = data_cleaned[["ENGINE_SIZE","CYLEINDER","CITY","HWY","CO2_EMISSION","ACURA_MAKE","ALFA ROMEO_MAKE","ASTON MARTIN_MAKE","AUDI_MAKE","BENTLEY_MAKE","BMW_MAKE","BUICK_MAKE","CADILLAC_MAKE","CHEVROLET_MAKE","CHRYSLER_MAKE","DODGE_MAKE","FIAT_MAKE","FORD_MAKE","GMC_MAKE","HONDA_MAKE","HYUNDAI_MAKE","INFINITI_MAKE","JAGUAR_MAKE","JEEP_MAKE","KIA_MAKE","LAMBORGHINI_MAKE","LAND ROVER_MAKE","LEXUS_MAKE","LINCOLN_MAKE","MASERATI_MAKE","MAZDA_MAKE","MERCEDES-BENZ_MAKE","MINI_MAKE","MITSUBISHI_MAKE","NISSAN_MAKE","PORSCHE_MAKE","RAM_MAKE","ROLLS-ROYCE_MAKE","SCION_MAKE","SMART_MAKE","SRT_MAKE","SUBARU_MAKE","TOYOTA_MAKE","VOLKSWAGEN_MAKE","VOLVO_MAKE","ILX_MODEL","ILX HYBRID_MODEL","MDX 4WD_MODEL","RDX AWD_MODEL","RLX_MODEL","TL_MODEL","TL AWD_MODEL","TSX_MODEL","4C_MODEL","DB9_MODEL","RAPIDE_MODEL","V8 VANTAGE_MODEL","V8 VANTAGE S_MODEL","VANQUISH_MODEL","A4_MODEL","A4 QUATTRO_MODEL","A5 CABRIOLET QUATTRO_MODEL","A5 QUATTRO_MODEL","A6 QUATTRO_MODEL","A6 QUATTRO TDI_MODEL","A7 QUATTRO_MODEL","A7 QUATTRO TDI_MODEL","A8_MODEL","A8 TDI_MODEL","A8L_MODEL","A8L TDI_MODEL","ALLROAD QUATTRO_MODEL","Q5_MODEL","Q5 HYBRID_MODEL","Q5 TDI_MODEL","Q7_MODEL","Q7 TDI_MODEL","R8_MODEL","R8 SPYDER_MODEL","RS5_MODEL","RS5 CABRIOLET_MODEL","RS7_MODEL","S4_MODEL","S5_MODEL","S5 CABRIOLET_MODEL","S6_MODEL","S7_MODEL","S8_MODEL","SQ5_MODEL","TT COUPE QUATTRO_MODEL","TT ROADSTER QUATTRO_MODEL","TTS COUPE QUATTRO_MODEL","TTS ROADSTER QUATTRO_MODEL","CONTINENTAL GT_MODEL","CONTINENTAL GT CONVERTIBLE_MODEL","CONTINENTAL GT SPEED CONVERTIBLE_MODEL","CONTINENTAL GTC_MODEL","FLYING SPUR_MODEL","MULSANNE_MODEL","320i_MODEL","320i xDRIVE_MODEL","328d xDRIVE_MODEL","328d xDRIVE TOURING_MODEL","328i_MODEL","328i xDRIVE_MODEL","328i xDRIVE GRAN TURISMO_MODEL","328i xDRIVE TOURING_MODEL","335i_MODEL","335i xDRIVE_MODEL","335i xDRIVE GRAN TURISMO_MODEL","428i COUPE_MODEL","428i xDRIVE COUPE_MODEL","435i COUPE_MODEL","435i xDRIVE COUPE_MODEL","528i_MODEL","528i xDRIVE_MODEL","535d xDRIVE_MODEL","535i xDRIVE_MODEL","535i xDRIVE GRAN TURISMO_MODEL","550i xDRIVE_MODEL","550i xDRIVE GRAN TURISMO_MODEL","640i xDRIVE GRAN COUPE_MODEL","650i xDRIVE CABRIOLET_MODEL","650i xDRIVE COUPE_MODEL","650i xDRIVE GRAN COUPE_MODEL","740Li xDRIVE_MODEL","750i xDRIVE_MODEL","750Li xDRIVE_MODEL","760Li_MODEL","ACTIVEHYBRID 3_MODEL","ACTIVEHYBRID 5_MODEL","ACTIVEHYBRID 7L_MODEL","ALPINA B7 xDRIVE LWB_MODEL","ALPINA B7 xDRIVE SWB_MODEL","M5_MODEL","M6_MODEL","M6 CABRIOLET_MODEL","M6 GRAN COUPE_MODEL","X1 xDRIVE28i_MODEL","X1 xDRIVE35i_MODEL","X3 xDRIVE28i_MODEL","X3 xDRIVE35i_MODEL","X5 xDRIVE35i_MODEL","X5 xDRIVE50i_MODEL","X6 M_MODEL","X6 xDRIVE35i_MODEL","X6 xDRIVE50i_MODEL","Z4 sDRIVE28i_MODEL","Z4 sDRIVE35i_MODEL","Z4 sDRIVE35is_MODEL","ENCLAVE_MODEL","ENCLAVE AWD_MODEL","ENCORE_MODEL","ENCORE AWD_MODEL","LACROSSE_MODEL","LACROSSE AWD_MODEL","LACROSSE eASSIST_MODEL","REGAL_MODEL","REGAL AWD_MODEL","REGAL eASSIST_MODEL","VERANO_MODEL","ATS_MODEL","ATS AWD_MODEL","CTS COUPE_MODEL","CTS COUPE AWD_MODEL","CTS SEDAN_MODEL","CTS SEDAN AWD_MODEL","CTS SEDAN Vsport_MODEL","CTS SPORT WAGON_MODEL","CTS SPORT WAGON AWD_MODEL","CTS-V COUPE_MODEL","CTS-V SEDAN_MODEL","CTS-V SPORT WAGON_MODEL","ESCALADE AWD_MODEL","ESCALADE ESV AWD_MODEL","SRX_MODEL","SRX AWD_MODEL","XTS_MODEL","XTS AWD_MODEL","XTS Vsport AWD_MODEL","CAMARO_MODEL","CAMARO 2LS_MODEL","CAMARO SS_MODEL","CAMARO ZL1_MODEL","CORVETTE_MODEL","CRUZE_MODEL","CRUZE DIESEL_MODEL","CRUZE ECO_MODEL","EQUINOX_MODEL","EQUINOX AWD_MODEL","EXPRESS 1500 CARGO_MODEL","EXPRESS 1500 CARGO AWD_MODEL","EXPRESS 1500 CARGO CONV_MODEL","EXPRESS 1500 CARGO CONV AWD_MODEL","EXPRESS 1500 PASSENGER_MODEL","EXPRESS 1500 PASSENGER AWD_MODEL","EXPRESS 2500 PASSENGER_MODEL","EXPRESS 3500 PASSENGER_MODEL","IMPALA_MODEL","IMPALA ECO_MODEL","MALIBU_MODEL","ORLANDO_MODEL","SILVERADO_MODEL","SILVERADO 4WD_MODEL","SONIC_MODEL","SONIC RS_MODEL","SONIC 5_MODEL","SONIC 5 RS_MODEL","SPARK_MODEL","SUBURBAN_MODEL","SUBURBAN 4WD_MODEL","TAHOE_MODEL","TAHOE 4WD_MODEL","TRAVERSE_MODEL","TRAVERSE AWD_MODEL","TRAX_MODEL","TRAX AWD_MODEL","300_MODEL","200 CONVERTIBLE_MODEL","200 CONVERTIBLE FFV_MODEL","200 SEDAN_MODEL","200 SEDAN FFV_MODEL","300 (MDS)_MODEL","300 AWD_MODEL","300 AWD (MDS)_MODEL","300 AWD FFV_MODEL","300 FFV_MODEL","300 SRT (MDS)_MODEL","TOWN & COUNTRY FFV_MODEL","AVENGER_MODEL","AVENGER FFV_MODEL","CHALLENGER_MODEL","CHALLENGER (MDS)_MODEL","CHALLENGER SRT_MODEL","CHALLENGER SRT (MDS)_MODEL","CHARGER_MODEL","CHARGER (MDS)_MODEL","CHARGER AWD_MODEL","CHARGER AWD (MDS)_MODEL","CHARGER AWD FFV_MODEL","CHARGER FFV_MODEL","CHARGER SRT (MDS)_MODEL","DART_MODEL","DART FFV_MODEL","DART GT_MODEL","DART TURBO AERO_MODEL","DURANGO AWD (MDS)_MODEL","DURANGO AWD FFV_MODEL","GRAND CARAVAN FFV_MODEL","JOURNEY_MODEL","JOURNEY AWD_MODEL","JOURNEY FFV_MODEL","500 ABARTH CABRIO_MODEL","500 ABARTH HATCHBACK_MODEL","500 CABRIO_MODEL","500 CABRIO TURBO_MODEL","500 HATCHBACK_MODEL","500 HATCHBACK TURBO_MODEL","500L TURBO_MODEL","C-MAX HYBRID_MODEL","E150 VAN FFV_MODEL","E150 WAGON FFV_MODEL","E350 WAGON_MODEL","E350 WAGON FFV_MODEL","EDGE_MODEL","EDGE AWD_MODEL","ESCAPE_MODEL","ESCAPE AWD_MODEL","EXPEDITION 4X4 FFV_MODEL","EXPLORER_MODEL","EXPLORER AWD_MODEL","EXPLORER FFV_MODEL","EXPLORER FFV AWD_MODEL","F150_MODEL","F150 4X4_MODEL","F150 FFV_MODEL","F150 FFV 4X4_MODEL","F150 RAPTOR 4X4_MODEL","FIESTA_MODEL","FIESTA SFE_MODEL","FIESTA ST_MODEL","FLEX_MODEL","FLEX AWD_MODEL","FLEX AWD (EcoBoost)_MODEL","FOCUS_MODEL","FOCUS FFV_MODEL","FOCUS SFE FFV_MODEL","FUSION_MODEL","FUSION (Start/Stop)_MODEL","FUSION AWD_MODEL","FUSION HYBRID_MODEL","MUSTANG_MODEL","MUSTANG CONVERTIBLE_MODEL","TAURUS_MODEL","TAURUS AWD_MODEL","TAURUS FFV_MODEL","TAURUS FFV AWD_MODEL","TRANSIT CONNECT_MODEL","TRANSIT CONNECT TAXI_MODEL","TRANSIT CONNECT WAGON_MODEL","ACADIA_MODEL","ACADIA AWD_MODEL","SAVANA 1500 CARGO_MODEL","SAVANA 1500 CARGO AWD_MODEL","SAVANA 1500 CARGO CONV_MODEL","SAVANA 1500 CARGO CONV AWD_MODEL","SAVANA 1500 PASSENGER_MODEL","SAVANA 1500 PASSENGER AWD_MODEL","SAVANA 2500 PASSENGER_MODEL","SAVANA 3500 PASSENGER_MODEL","SIERRA_MODEL","SIERRA 4WD_MODEL","TERRAIN_MODEL","TERRAIN AWD_MODEL","YUKON_MODEL","YUKON 4WD_MODEL","YUKON DENALI AWD_MODEL","YUKON DENALI XL AWD_MODEL","YUKON XL_MODEL","YUKON XL 4WD_MODEL","ACCORD_MODEL","ACCORD HYBRID_MODEL","CIVIC_MODEL","CROSSTOUR AWD_MODEL","CR-V_MODEL","CR-V AWD_MODEL","CR-Z_MODEL","FIT_MODEL","ODYSSEY_MODEL","PILOT_MODEL","PILOT AWD_MODEL","RIDGELINE AWD_MODEL","ACCENT_MODEL","ELANTRA GT_MODEL","EQUUS_MODEL","GENESIS_MODEL","SANTA FE_MODEL","SANTA FE 4WD_MODEL","SANTA FE SPORT_MODEL","SANTA FE SPORT 4WD_MODEL","SONATA_MODEL","SONATA HYBRID_MODEL","SONATA HYBRID LIMITED_MODEL","TUCSON_MODEL","TUCSON 4WD_MODEL","VELOSTER_MODEL","VELOSTER TURBO_MODEL","Q50_MODEL","Q50 AWD_MODEL","Q50 HYBRID_MODEL","Q50 HYBRID AWD_MODEL","Q60 AWD COUPE_MODEL","Q60 CONVERTIBLE_MODEL","Q60 COUPE_MODEL","Q70_MODEL","Q70 AWD_MODEL","Q70 HYBRID_MODEL","QX50 AWD_MODEL","QX60_MODEL","QX60 AWD_MODEL","QX60 HYBRID AWD_MODEL","QX70 AWD_MODEL","QX80 4WD_MODEL","F-TYPE CONVERTIBLE_MODEL","F-TYPE S CONVERTIBLE_MODEL","F-TYPE V8 S CONVERTIBLE_MODEL","XF_MODEL","XF 3.0L AWD_MODEL","XFR_MODEL","XFR-S_MODEL","XJ AWD_MODEL","XJ SUPERCHARGED_MODEL","XJL AWD PORTFOLIO_MODEL","XJL SUPERCHARGED_MODEL","XJR_MODEL","XJR LWB_MODEL","XK CONVERTIBLE_MODEL","XK COUPE_MODEL","XKR CONVERTIBLE_MODEL","XKR COUPE_MODEL","XKR-S CONVERTIBLE_MODEL","XKR-S COUPE_MODEL","CHEROKEE_MODEL","CHEROKEE 4X4_MODEL","CHEROKEE 4X4 ACTIVE DRIVE II_MODEL","CHEROKEE TRAILHAWK 4X4_MODEL","COMPASS_MODEL","COMPASS 4X4_MODEL","COMPASS 4X4 TRAIL RATED_MODEL","GRAND CHEROKEE 4X4 (MDS)_MODEL","GRAND CHEROKEE 4X4 DIESEL_MODEL","GRAND CHEROKEE 4X4 FFV_MODEL","GRAND CHEROKEE 4X4 SRT (MDS)_MODEL","PATRIOT_MODEL","PATRIOT 4X4_MODEL","PATRIOT 4X4 TRAIL RATED_MODEL","WRANGLER 4X4 (2-DOOR)_MODEL","WRANGLER UNLIMITED 4X4 (4-DOOR)_MODEL","CADENZA_MODEL","FORTE_MODEL","FORTE 5_MODEL","FORTE KOUP_MODEL","OPTIMA_MODEL","OPTIMA HYBRID_MODEL","OPTIMA HYBRID EX_MODEL","RIO_MODEL","RIO ECO_MODEL","RONDO_MODEL","SEDONA_MODEL","SORENTO_MODEL","SORENTO 4WD_MODEL","SOUL_MODEL","SOUL ECO Dynamics_MODEL","SPORTAGE_MODEL","SPORTAGE AWD_MODEL","AVENTADOR COUPE_MODEL","GALLARDO COUPE_MODEL","LR2_MODEL","LR4_MODEL","RANGE ROVER EVOQUE_MODEL","RANGE ROVER EVOQUE COUPE_MODEL","RANGE ROVER LWB V8 5.0 SC_MODEL","RANGE ROVER LWB V8 5.0 SC FFV_MODEL","RANGE ROVER SPORT V6 3.0 SC_MODEL","RANGE ROVER SPORT V6 3.0 SC FFV_MODEL","RANGE ROVER SPORT V8 5.0 SC_MODEL","RANGE ROVER SPORT V8 5.0 SC FFV_MODEL","RANGE ROVER V6 3.0 SC_MODEL","RANGE ROVER V6 3.0 SC FFV_MODEL","RANGE ROVER V8 5.0 SC_MODEL","RANGE ROVER V8 5.0 SC FFV_MODEL","CT 200h_MODEL","ES 300h_MODEL","ES 350_MODEL","GS 350_MODEL","GS 350 AWD_MODEL","GS 450h_MODEL","GX 460_MODEL","IS 250_MODEL","IS 250 AWD_MODEL","IS 250 C_MODEL","IS 350_MODEL","IS 350 AWD_MODEL","IS 350 C_MODEL","IS F_MODEL","LS 460_MODEL","LS 460 AWD_MODEL","LS 460 L AWD_MODEL","LS 600h L_MODEL","LX 570_MODEL","RX 350 AWD_MODEL","RX 450h AWD_MODEL","MKS AWD_MODEL","MKT AWD_MODEL","MKT LIVERY_MODEL","MKT LIVERY AWD_MODEL","MKX AWD_MODEL","MKZ_MODEL","MKZ AWD_MODEL","MKZ HYBRID_MODEL","NAVIGATOR 4X4 FFV_MODEL","GHIBLI_MODEL","GHIBLI AWD_MODEL","GRANTURISMO_MODEL","GRANTURISMO CONVERTIBLE_MODEL","QUATTROPORTE GTS_MODEL","QUATTROPORTE SQ4_MODEL","CX-5_MODEL","CX-5 4WD_MODEL","CX-9_MODEL","CX-9 4WD_MODEL","MAZDA2_MODEL","MAZDA3 4-DOOR_MODEL","MAZDA3 4-DOOR (i-ELOOP)_MODEL","MAZDA3 4-DOOR (SIL)_MODEL","MAZDA3 5-DOOR_MODEL","MAZDA3 5-DOOR (i-ELOOP)_MODEL","MAZDA3 5-DOOR (SIL)_MODEL","MAZDA5_MODEL","MAZDA6_MODEL","MAZDA6 (i-ELOOP)_MODEL","MX-5_MODEL","B 250_MODEL","C 250_MODEL","C 250 COUPE_MODEL","C 300 4MATIC FFV_MODEL","C 350_MODEL","C 350 4MATIC_MODEL","C 350 4MATIC COUPE_MODEL","C 350 COUPE_MODEL","C 63 AMG_MODEL","C 63 AMG COUPE_MODEL","CL 550 4MATIC_MODEL","CL 63 AMG_MODEL","CLA 250_MODEL","CLA 45 AMG 4MATIC_MODEL","CLS 550 4MATIC_MODEL","CLS 63 AMG 4MATIC_MODEL","CLS 63 AMG S 4MATIC_MODEL","E 250 BLUETEC 4MATIC_MODEL","E 300 4MATIC_MODEL","E 350 4MATIC_MODEL","E 350 4MATIC COUPE_MODEL","E 350 4MATIC WAGON_MODEL","E 350 CABRIOLET_MODEL","E 350 COUPE_MODEL","E 400 HYBRID_MODEL","E 550 4MATIC_MODEL","E 550 CABRIOLET_MODEL","E 550 COUPE_MODEL","E 63 AMG 4MATIC_MODEL","E 63 AMG 4MATIC WAGON_MODEL","E 63 AMG S 4MATIC_MODEL","E 63 AMG S 4MATIC WAGON_MODEL","G 550_MODEL","G 63 AMG_MODEL","GL 350 BLUETEC 4MATIC_MODEL","GL 450 4MATIC_MODEL","GL 550 4MATIC_MODEL","GL 63 AMG_MODEL","GLK 250 BLUETEC 4MATIC_MODEL","GLK 350 4MATIC_MODEL","ML 350 4MATIC FFV_MODEL","ML 350 BLUETEC 4MATIC_MODEL","ML 550 4MATIC_MODEL","ML 63 AMG 4MATIC_MODEL","S 550 4MATIC LWB_MODEL","S 550 4MATIC SWB_MODEL","S 63 AMG 4MATIC_MODEL","SL 550_MODEL","SL 63 AMG_MODEL","SL 65 AMG_MODEL","SLK 250_MODEL","SLK 350_MODEL","SLK 55 AMG_MODEL","SLS AMG BLACK SERIES COUPE_MODEL","SLS AMG GT COUPE_MODEL","SLS AMG ROADSTER_MODEL","COOPER CLUBMAN_MODEL","COOPER CONVERTIBLE_MODEL","COOPER COUNTRYMAN_MODEL","COOPER COUPE_MODEL","COOPER PACEMAN_MODEL","COOPER ROADSTER_MODEL","COOPER S CLUBMAN_MODEL","COOPER S CONVERTIBLE_MODEL","COOPER S COUNTRYMAN ALL4_MODEL","COOPER S COUPE_MODEL","COOPER S PACEMAN ALL4_MODEL","COOPER S ROADSTER_MODEL","JOHN COOPER WORKS CLUBMAN_MODEL","JOHN COOPER WORKS CONVERTIBLE_MODEL","JOHN COOPER WORKS COUNTRYMAN ALL4_MODEL","JOHN COOPER WORKS COUPE_MODEL","JOHN COOPER WORKS PACEMAN ALL4_MODEL","JOHN COOPER WORKS ROADSTER_MODEL","LANCER_MODEL","LANCER AWD_MODEL","LANCER EVOLUTION_MODEL","LANCER RALLIART_MODEL","LANCER SPORTBACK_MODEL","MIRAGE_MODEL","OUTLANDER_MODEL","OUTLANDER 4WD_MODEL","RVR_MODEL","RVR 4WD_MODEL","370Z_MODEL","370Z ROADSTER_MODEL","ALTIMA_MODEL","ARMADA 4WD_MODEL","FRONTIER_MODEL","FRONTIER 4WD_MODEL","GT-R_MODEL","JUKE_MODEL","JUKE AWD_MODEL","MAXIMA_MODEL","MURANO AWD_MODEL","NV200 CARGO VAN_MODEL","PATHFINDER_MODEL","PATHFINDER 4WD_MODEL","PATHFINDER HYBRID 4WD_MODEL","QUEST_MODEL","ROGUE_MODEL","ROGUE AWD_MODEL","SENTRA_MODEL","TITAN_MODEL","TITAN 4WD_MODEL","VERSA_MODEL","XTERRA 4WD_MODEL","911 CARRERA_MODEL","911 CARRERA 4_MODEL","911 CARRERA 4 CABRIOLET_MODEL","911 CARRERA 4S_MODEL","911 CARRERA 4S CABRIOLET_MODEL","911 CARRERA CABRIOLET_MODEL","911 CARRERA S_MODEL","911 CARRERA S CABRIOLET_MODEL","911 GT3_MODEL","911 TURBO_MODEL","911 TURBO CABRIOLET_MODEL","911 TURBO S_MODEL","911 TURBO S CABRIOLET_MODEL","BOXSTER_MODEL","BOXSTER S_MODEL","CAYENNE_MODEL","CAYENNE DIESEL_MODEL","CAYENNE GTS_MODEL","CAYENNE S_MODEL","CAYENNE S HYBRID_MODEL","CAYENNE TURBO_MODEL","CAYMAN_MODEL","CAYMAN S_MODEL","PANAMERA_MODEL","PANAMERA 4_MODEL","PANAMERA 4S_MODEL","PANAMERA 4S EXECUTIVE_MODEL","PANAMERA GTS_MODEL","PANAMERA S_MODEL","PANAMERA TURBO_MODEL","PANAMERA TURBO EXECUTIVE_MODEL","1500 (MDS)_MODEL","1500 DIESEL_MODEL","1500 FFV_MODEL","1500 HFE_MODEL","1500 4X4 (MDS)_MODEL","1500 4X4 DIESEL_MODEL","1500 4X4 FFV_MODEL","CARGO VAN FFV_MODEL","GHOST_MODEL","GHOST EWB_MODEL","PHANTOM_MODEL","PHANTOM COUPE_MODEL","PHANTOM DROPHEAD COUPE_MODEL","PHANTOM EWB_MODEL","WRAITH_MODEL","FR-S_MODEL","iQ_MODEL","tC_MODEL","xB_MODEL","xD_MODEL","FORTWO CABRIOLET_MODEL","FORTWO COUPE_MODEL","VIPER COUPE_MODEL","VIPER GTS COUPE_MODEL","BRZ_MODEL","FORESTER AWD_MODEL","IMPREZA AWD_MODEL","IMPREZA WAGON AWD_MODEL","LEGACY AWD_MODEL","OUTBACK AWD_MODEL","TRIBECA AWD_MODEL","XV CROSSTREK AWD_MODEL","XV CROSSTREK HYBRID AWD_MODEL","4RUNNER (Part-Time 4WD)_MODEL","4RUNNER 4WD_MODEL","AVALON_MODEL","CAMRY_MODEL","CAMRY HYBRID LE_MODEL","CAMRY HYBRID XLE/SE_MODEL","COROLLA_MODEL","COROLLA LE ECO (1-mode)_MODEL","COROLLA LE ECO (2-mode)_MODEL","COROLLA MATRIX_MODEL","FJ CRUISER 4WD_MODEL","HIGHLANDER_MODEL","HIGHLANDER AWD_MODEL","HIGHLANDER HYBRID AWD_MODEL","HIGHLANDER HYBRID AWD LE_MODEL","PRIUS_MODEL","PRIUS c_MODEL","PRIUS v_MODEL","RAV4_MODEL","RAV4 AWD_MODEL","RAV4 LIMITED AWD_MODEL","SEQUOIA 4WD_MODEL","SIENNA_MODEL","SIENNA AWD_MODEL","TACOMA_MODEL","TACOMA 4WD_MODEL","TUNDRA_MODEL","TUNDRA 4WD_MODEL","VENZA_MODEL","VENZA 4WD_MODEL","YARIS_MODEL","BEETLE_MODEL","BEETLE CONVERTIBLE_MODEL","BEETLE TDI_MODEL","CC_MODEL","CC 4MOTION_MODEL","EOS_MODEL","GOLF WAGON_MODEL","GOLF WAGON TDI_MODEL","JETTA_MODEL","JETTA GLI_MODEL","JETTA TDI_MODEL","JETTA TURBO HYBRID_MODEL","PASSAT_MODEL","PASSAT TDI_MODEL","ROUTAN_MODEL","TIGUAN_MODEL","TIGUAN 4MOTION_MODEL","TOUAREG_MODEL","TOUAREG TDI_MODEL","S60_MODEL","S60 AWD_MODEL","S80_MODEL","S80 AWD_MODEL","XC60_MODEL","XC60 AWD_MODEL","XC70 AWD_MODEL","XC90 AWD_MODEL","COMPACT_VEHICLE_SIZE","SUV-SMALL_VEHICLE_SIZE","MID-SIZE_VEHICLE_SIZE","TWO-SEATER_VEHICLE_SIZE","MINICOMPACT_VEHICLE_SIZE","SUBCOMPACT_VEHICLE_SIZE","FULL-SIZE_VEHICLE_SIZE","STATION WAGON-SMALL_VEHICLE_SIZE","SUV-STANDARD_VEHICLE_SIZE","VAN-CARGO_VEHICLE_SIZE","VAN-PASSENGER_VEHICLE_SIZE","PICKUP TRUCK-STANDARD_VEHICLE_SIZE","MINIVAN_VEHICLE_SIZE","SPECIAL PURPOSE VEHICLE_VEHICLE_SIZE","STATION WAGON-MID-SIZE_VEHICLE_SIZE","PICKUP TRUCK-SMALL_VEHICLE_SIZE","AS5_TRANSMISSION","M6_TRANSMISSION","AV7_TRANSMISSION","AS6_TRANSMISSION","AM6_TRANSMISSION","A6_TRANSMISSION","AM7_TRANSMISSION","AV8_TRANSMISSION","AS8_TRANSMISSION","A7_TRANSMISSION","A8_TRANSMISSION","M7_TRANSMISSION","A4_TRANSMISSION","M5_TRANSMISSION","AV_TRANSMISSION","A5_TRANSMISSION","AS7_TRANSMISSION","A9_TRANSMISSION","AS9_TRANSMISSION","AV6_TRANSMISSION","AS4_TRANSMISSION","AM5_TRANSMISSION","Z_FUEL_TYPES","D_FUEL_TYPES","X_FUEL_TYPES","E_FUEL_TYPES"]]
y = data_cleaned["COMBl"]

# One-hot encode the categorical variables
#X = pd.get_dummies(X)

# Split the data into training and testing sets
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, shuffle=False)

# Initialize the Random Forest Regressor
rf = RandomForestRegressor(n_estimators=100)

# Train the model
rf.fit(X_train, y_train)

# Make predictions on the test set
y_pred = rf.predict(X_test)

# Calculate the performance metrics
mse = mean_squared_error(y_test, y_pred)
rmse = sqrt(mse)
r2 = r2_score(y_test, y_pred)

# Print the performance metrics
st.write(f'MSE: {mse}')
st.write(f'RMSE: {rmse}')
st.write(f'R^2: {r2}')

# Grafic de dispersie
plt.figure(figsize=(10, 6))
sns.scatterplot(x=y_test, y=y_pred)
plt.xlabel('Valori Reale')
plt.ylabel('Valori Prezise')
plt.title('Comparare Valori Reale vs. Prezise')
plt.plot([y_test.min(), y_test.max()], [y_test.min(), y_test.max()], color='red', lw=3)  # Linie ideală
plt.show()

# Grafic de linii pentru o comparație directă
plt.figure(figsize=(12, 6))
plt.plot(y_test.reset_index(drop=True), label='Valori Reale', color='blue', lw=2)
plt.plot(y_pred, label='Valori Prezise', color='green', lw=2)
plt.title('Comparare Valori Reale vs. Prezise în Timp')
plt.xlabel('Indexul Datelor de Testare')
plt.ylabel('Consumul de Carburant')
plt.legend()
plt.show()

# Histogram of Residuals
residuals = y_test - y_pred
plt.figure(figsize=(10, 6))
sns.histplot(residuals, bins=20, kde=True)
plt.title('Histogram of Prediction Residuals')
plt.xlabel('Residuals')
plt.ylabel('Frequency')
plt.show()